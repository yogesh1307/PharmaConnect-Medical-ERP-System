{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\DjangoMedicalStoreFrontEndInReactJS\\\\src\\\\pages\\\\BillGenerateComponent.js\";\nimport React from \"react\";\nimport APIHandler from \"../utils/APIHandler\";\nimport AutoCompleteMedicine from \"../components/AutoCompleteMedicine\";\n\nclass BillGenerateComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorRes: false,\n      errorMessage: \"\",\n      btnMessage: 0,\n      sendData: false,\n      medicineDetails: [{\n        sr_no: 1,\n        id: 0,\n        medicine_name: \"\",\n        qty: 1,\n        qty_type: \"Pieces\",\n        unit_price: 0,\n        c_gst: 0,\n        s_gst: 0,\n        amount: 0\n      }],\n      currentSrno: 1\n    };\n\n    this.AddMedicineDetails = () => {\n      const srno = this.state.currentSrno + 1;\n      const newItem = {\n        sr_no: srno,\n        medicine_name: \"\",\n        qty: 1,\n        qty_type: \"Pieces\",\n        unit_price: 0,\n        c_gst: 0,\n        s_gst: 0,\n        amount: 0\n      };\n      this.setState(prevState => ({\n        currentSrno: srno,\n        medicineDetails: [...prevState.medicineDetails, newItem]\n      }));\n    };\n\n    this.RemoveMedicineDetails = () => {\n      if (this.state.medicineDetails.length > 1) {\n        this.setState(prevState => ({\n          currentSrno: prevState.currentSrno - 1,\n          medicineDetails: prevState.medicineDetails.slice(0, -1)\n        }));\n      }\n    };\n\n    this.showDataInInputs = (index, item) => {\n      const updatedDetails = [...this.state.medicineDetails];\n      updatedDetails[index] = { ...updatedDetails[index],\n        id: item.id,\n        qty: 1,\n        qty_type: \"Pieces\",\n        unit_price: item.sell_price,\n        c_gst: item.c_gst,\n        s_gst: item.s_gst,\n        medicine_name: item.name,\n        amount: (parseInt(item.sell_price) || 0) + (parseInt(item.c_gst) || 0) + (parseInt(item.s_gst) || 0)\n      };\n      this.setState({\n        medicineDetails: updatedDetails\n      });\n    };\n\n    this.qtyChangeUpdate = event => {\n      const value = parseInt(event.target.value) || 0;\n      const index = event.target.dataset.index;\n      const updatedDetails = [...this.state.medicineDetails];\n      const med = updatedDetails[index];\n      med.qty = value;\n      med.amount = ((parseInt(med.unit_price) || 0) + (parseInt(med.c_gst) || 0) + (parseInt(med.s_gst) || 0)) * value;\n      this.setState({\n        medicineDetails: updatedDetails\n      });\n    };\n\n    this.formSubmit = this.formSubmit.bind(this);\n  }\n\n  async formSubmit(event) {\n    event.preventDefault();\n    const {\n      medicineDetails\n    } = this.state;\n    const customer_name = event.target.customer_name.value;\n    const address = event.target.address.value;\n    const phone = event.target.phone.value;\n    this.setState({\n      btnMessage: 1\n    });\n    const apiHandler = new APIHandler();\n    const response = await apiHandler.generateBill(customer_name, address, phone, medicineDetails);\n    this.setState({\n      btnMessage: 0,\n      errorRes: response.data.error,\n      errorMessage: response.data.message,\n      sendData: true\n    });\n    this.billGeneratePrint(customer_name, address, phone, medicineDetails);\n  }\n\n  billGeneratePrint(customer_name, address, phone, medicineDetails) {\n    let billDetails = \"<style> table{ width:100%;border-collapse:collapse; } td{ padding:5px } th { padding:5px } </style><div>\";\n    billDetails += \"<table border='1'>\";\n    billDetails += \"<tr><td colspan='7' style='text-align:center'>Bill For Customer</td></tr>\";\n    billDetails += `<tr><td colspan='2'>Name : ${customer_name}</td><td colspan='3'>Address : ${address}</td><td colspan='2'>Phone : ${phone}</td></tr>`;\n    billDetails += \"<tr><th>SR NO.</th><th>Name</th><th>QTY</th><th>QTY TYPE</th><th>UNIT PRICE</th><th>GST</th><th>AMOUNT</th></tr>\";\n    let totalamt = 0;\n    medicineDetails.forEach(med => {\n      totalamt += parseInt(med.amount);\n      billDetails += `<tr><td>${med.sr_no}</td><td>${med.medicine_name}</td><td>${med.qty}</td><td>${med.qty_type}</td><td>${med.unit_price}</td><td>${med.c_gst + med.s_gst}</td><td>${med.amount}</td></tr>`;\n    });\n    billDetails += `<tr><td colspan='6' style='text-align:right;font-weight:bold;background:green;color:white'>Total :</td><td>${totalamt}</td></tr>`;\n    billDetails += \"</table></div>\";\n    const mywindow = window.open(\"\", \"Bill Print\", \"height=650&width=900&top=100&left=100\");\n    mywindow.document.write(billDetails);\n    mywindow.print();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"block-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, \"Generate Bill\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, \"Generate Bill for Customers\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.formSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, \"Customer Name :\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"customer_name\",\n      className: \"form-control\",\n      placeholder: \"Enter Customer Name\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }, \"Address :\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"address\",\n      className: \"form-control\",\n      placeholder: \"Enter Address\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 23\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, \"Phone :\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"phone\",\n      className: \"form-control\",\n      placeholder: \"Enter Phone\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    })))), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, \"Medicine Details\"), this.state.medicineDetails.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 23\n      }\n    }, \"SR No :\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: item.sr_no,\n      readOnly: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 23\n      }\n    }, \"Medicine Name :\"), /*#__PURE__*/React.createElement(AutoCompleteMedicine, {\n      itemPostion: index,\n      showDataInInputs: this.showDataInInputs,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 23\n      }\n    }, \"Qty :\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      value: item.qty,\n      \"data-index\": index,\n      onChange: this.qtyChangeUpdate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 23\n      }\n    }, \"Qty Type :\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: item.qty_type,\n      readOnly: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 23\n      }\n    }, \"Amount :\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: item.amount,\n      readOnly: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 23\n      }\n    })))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-info m-t-20\",\n      onClick: this.AddMedicineDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, \"+ Add Medicine\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger m-t-20 m-l-10\",\n      onClick: this.RemoveMedicineDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, \"- Remove Medicine\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary m-t-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }\n    }, this.state.btnMessage === 0 ? \"Generate Bill\" : \"Please Wait...\"))))));\n  }\n\n}\n\nexport default BillGenerateComponent;","map":{"version":3,"sources":["D:/react/DjangoMedicalStoreFrontEndInReactJS/src/pages/BillGenerateComponent.js"],"names":["React","APIHandler","AutoCompleteMedicine","BillGenerateComponent","Component","constructor","props","state","errorRes","errorMessage","btnMessage","sendData","medicineDetails","sr_no","id","medicine_name","qty","qty_type","unit_price","c_gst","s_gst","amount","currentSrno","AddMedicineDetails","srno","newItem","setState","prevState","RemoveMedicineDetails","length","slice","showDataInInputs","index","item","updatedDetails","sell_price","name","parseInt","qtyChangeUpdate","event","value","target","dataset","med","formSubmit","bind","preventDefault","customer_name","address","phone","apiHandler","response","generateBill","data","error","message","billGeneratePrint","billDetails","totalamt","forEach","mywindow","window","open","document","write","print","render","map"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport APIHandler from \"../utils/APIHandler\";\nimport AutoCompleteMedicine from \"../components/AutoCompleteMedicine\";\n\nclass BillGenerateComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.formSubmit = this.formSubmit.bind(this);\n  }\n  state = {\n    errorRes: false,\n    errorMessage: \"\",\n    btnMessage: 0,\n    sendData: false,\n    medicineDetails: [\n      {\n        sr_no: 1,\n        id: 0,\n        medicine_name: \"\",\n        qty: 1,\n        qty_type: \"Pieces\",\n        unit_price: 0,\n        c_gst: 0,\n        s_gst: 0,\n        amount: 0,\n      },\n    ],\n    currentSrno: 1,\n  };\n\n  async formSubmit(event) {\n    event.preventDefault();\n\n    const { medicineDetails } = this.state;\n    const customer_name = event.target.customer_name.value;\n    const address = event.target.address.value;\n    const phone = event.target.phone.value;\n\n    this.setState({ btnMessage: 1 });\n\n    const apiHandler = new APIHandler();\n    const response = await apiHandler.generateBill(\n      customer_name,\n      address,\n      phone,\n      medicineDetails\n    );\n\n    this.setState({\n      btnMessage: 0,\n      errorRes: response.data.error,\n      errorMessage: response.data.message,\n      sendData: true,\n    });\n\n    this.billGeneratePrint(customer_name, address, phone, medicineDetails);\n  }\n\n  billGeneratePrint(customer_name, address, phone, medicineDetails) {\n    let billDetails =\n      \"<style> table{ width:100%;border-collapse:collapse; } td{ padding:5px } th { padding:5px } </style><div>\";\n    billDetails += \"<table border='1'>\";\n    billDetails += \"<tr><td colspan='7' style='text-align:center'>Bill For Customer</td></tr>\";\n    billDetails += `<tr><td colspan='2'>Name : ${customer_name}</td><td colspan='3'>Address : ${address}</td><td colspan='2'>Phone : ${phone}</td></tr>`;\n    billDetails += \"<tr><th>SR NO.</th><th>Name</th><th>QTY</th><th>QTY TYPE</th><th>UNIT PRICE</th><th>GST</th><th>AMOUNT</th></tr>\";\n\n    let totalamt = 0;\n    medicineDetails.forEach((med) => {\n      totalamt += parseInt(med.amount);\n      billDetails += `<tr><td>${med.sr_no}</td><td>${med.medicine_name}</td><td>${med.qty}</td><td>${med.qty_type}</td><td>${med.unit_price}</td><td>${med.c_gst + med.s_gst}</td><td>${med.amount}</td></tr>`;\n    });\n\n    billDetails += `<tr><td colspan='6' style='text-align:right;font-weight:bold;background:green;color:white'>Total :</td><td>${totalamt}</td></tr>`;\n    billDetails += \"</table></div>\";\n\n    const mywindow = window.open(\"\", \"Bill Print\", \"height=650&width=900&top=100&left=100\");\n    mywindow.document.write(billDetails);\n    mywindow.print();\n  }\n\n  AddMedicineDetails = () => {\n    const srno = this.state.currentSrno + 1;\n    const newItem = {\n      sr_no: srno,\n      medicine_name: \"\",\n      qty: 1,\n      qty_type: \"Pieces\",\n      unit_price: 0,\n      c_gst: 0,\n      s_gst: 0,\n      amount: 0,\n    };\n    this.setState((prevState) => ({\n      currentSrno: srno,\n      medicineDetails: [...prevState.medicineDetails, newItem],\n    }));\n  };\n\n  RemoveMedicineDetails = () => {\n    if (this.state.medicineDetails.length > 1) {\n      this.setState((prevState) => ({\n        currentSrno: prevState.currentSrno - 1,\n        medicineDetails: prevState.medicineDetails.slice(0, -1),\n      }));\n    }\n  };\n\n  showDataInInputs = (index, item) => {\n    const updatedDetails = [...this.state.medicineDetails];\n    updatedDetails[index] = {\n      ...updatedDetails[index],\n      id: item.id,\n      qty: 1,\n      qty_type: \"Pieces\",\n      unit_price: item.sell_price,\n      c_gst: item.c_gst,\n      s_gst: item.s_gst,\n      medicine_name: item.name,\n      amount:\n        (parseInt(item.sell_price) || 0) +\n        (parseInt(item.c_gst) || 0) +\n        (parseInt(item.s_gst) || 0),\n    };\n    this.setState({ medicineDetails: updatedDetails });\n  };\n\n  qtyChangeUpdate = (event) => {\n    const value = parseInt(event.target.value) || 0;\n    const index = event.target.dataset.index;\n    const updatedDetails = [...this.state.medicineDetails];\n    const med = updatedDetails[index];\n\n    med.qty = value;\n    med.amount =\n      ((parseInt(med.unit_price) || 0) +\n        (parseInt(med.c_gst) || 0) +\n        (parseInt(med.s_gst) || 0)) * value;\n\n    this.setState({ medicineDetails: updatedDetails });\n  };\n\n  render() {\n    return (\n      <section className=\"content\">\n        <div className=\"container-fluid\">\n          <div className=\"block-header\">\n            <h2>Generate Bill</h2>\n          </div>\n          <div className=\"card\">\n            <div className=\"header\">\n              <h2>Generate Bill for Customers</h2>\n            </div>\n            <div className=\"body\">\n              <form onSubmit={this.formSubmit}>\n                <div className=\"row\">\n                  <div className=\"col-lg-6\">\n                    <label>Customer Name :</label>\n                    <div className=\"form-group\">\n                      <input\n                        type=\"text\"\n                        name=\"customer_name\"\n                        className=\"form-control\"\n                        placeholder=\"Enter Customer Name\"\n                        required\n                      />\n                    </div>\n                  </div>\n                  <div className=\"col-lg-6\">\n                    <label>Address :</label>\n                    <div className=\"form-group\">\n                      <input\n                        type=\"text\"\n                        name=\"address\"\n                        className=\"form-control\"\n                        placeholder=\"Enter Address\"\n                        required\n                      />\n                    </div>\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col-lg-6\">\n                    <label>Phone :</label>\n                    <div className=\"form-group\">\n                      <input\n                        type=\"text\"\n                        name=\"phone\"\n                        className=\"form-control\"\n                        placeholder=\"Enter Phone\"\n                        required\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                <h4>Medicine Details</h4>\n                {this.state.medicineDetails.map((item, index) => (\n                  <div className=\"row\" key={index}>\n                    <div className=\"col-lg-2\">\n                      <label>SR No :</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        value={item.sr_no}\n                        readOnly\n                      />\n                    </div>\n                    <div className=\"col-lg-3\">\n                      <label>Medicine Name :</label>\n                      <AutoCompleteMedicine\n                        itemPostion={index}\n                        showDataInInputs={this.showDataInInputs}\n                      />\n                    </div>\n                    <div className=\"col-lg-2\">\n                      <label>Qty :</label>\n                      <input\n                        type=\"number\"\n                        className=\"form-control\"\n                        value={item.qty}\n                        data-index={index}\n                        onChange={this.qtyChangeUpdate}\n                      />\n                    </div>\n                    <div className=\"col-lg-2\">\n                      <label>Qty Type :</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        value={item.qty_type}\n                        readOnly\n                      />\n                    </div>\n                    <div className=\"col-lg-3\">\n                      <label>Amount :</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        value={item.amount}\n                        readOnly\n                      />\n                    </div>\n                  </div>\n                ))}\n\n                <button\n                  type=\"button\"\n                  className=\"btn btn-info m-t-20\"\n                  onClick={this.AddMedicineDetails}\n                >\n                  + Add Medicine\n                </button>\n                <button\n                  type=\"button\"\n                  className=\"btn btn-danger m-t-20 m-l-10\"\n                  onClick={this.RemoveMedicineDetails}\n                >\n                  - Remove Medicine\n                </button>\n\n                <br />\n                <button type=\"submit\" className=\"btn btn-primary m-t-20\">\n                  {this.state.btnMessage === 0 ? \"Generate Bill\" : \"Please Wait...\"}\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default BillGenerateComponent;"]},"metadata":{},"sourceType":"module"}